## 普通实时计算与实时数仓比较 
**普通的实时计算**优先考虑时效性，所以从数据源采集经过实时计算直接得到结果。如此 做时效性更好，但是弊端是由于计算过程中的中间结果没有沉淀下来，所以当面对大量实时 需求的时候，计算的复用性较差，开发成本随着需求增加直线上升。 实时数仓基于一定的数据仓库理念，对数据处理流程进行规划、分层，目的是提高数据 的复用性。 

**实时数仓**基于一定的数据仓库理念，对数据处理流程进行规划、分层，目的是提高数据 的复用性。
![[uTools_1655212523364.png]]
## 实时数仓分层
*ODS*：原始数据，日志和业务数据
*DWD：根据数据对象为单位进行分流，比如订单、页面访问等等 
DIM*：维度数据 
*DWM：对于部分数据对象进行进一步加工，比如独立访问、跳出行为，也可以和维度 进行关联，形成宽表，依旧是明细数据。 
DWS*：根据某个主题将多个事实数据轻度聚合，形成主题宽表。 
*ADS*：把ClickHouse中的数据根据可视化需进行筛选聚合
## 离线计算与实时计算的比较
**离线计算**：就是在计算开始前已知所有输入数据，输入数据不会产生变化，一般计算量 级较大，计算时间也较长。例如今天早上一点，把昨天累积的日志，计算出所需结果。最经 典的就是 Hadoop 的 MapReduce 方式； 一般是根据前一日的数据生成报表，虽然统计指标、报表繁多，但是对时效性不敏感。 从技术操作的角度，这部分属于批处理的操作。即根据确定范围的数据一次性计算。
**实时计算**：输入数据是可以以序列化的方式一个个输入并进行处理的，也就是说在开始 的时候并不需要知道所有的输入数据。与离线计算相比，运行时间短，计算量级相对较小。 强调计算过程的时间要短，即所查当下给出结果。 主要侧重于对当日数据的实时监控，通常业务逻辑相对离线需求简单一下，统计指标也 少一些，但是更注重数据的时效性，以及用户的交互性。从技术操作的角度，这部分属于流 处理的操作。根据数据源源不断地到达进行实时的运算
## 实时需求的种类
- 日常统计报表或分析图中需要包含当日部分
- 实时数据大屏监控
- 数据预警或提示
- 实时推荐系统
## 实现Flink 动态分流
在实时计算中一般把维度数据写入存储容器，一般是方便通过主键查询的数据库比如 HBase,Redis,MySQL 等。一般把事实数据写入流中，进行进一步处理，最终形成宽表。
- 一种是用 mysql 数据库存储，周期性的同步；
- 另一种是用 mysql 数据库存储，使用广播流。
![[uTools_1655215159909.png]]