## 一、 基准代码：
使用代码库进行版本控制和管理，确保每个微服务都有其自己的代码库。
## 二、显式声明依赖关系
这里的依赖指所有的依赖，包括应用程序本身的类库和操作系统层面被应用程序所使用的库文件或者其他二进制文件，都必须进行显示声明，并对版本做出明确的指定。例如使用yaml、xml、json 等明确依赖的信息
## 三、配置：在环境中存储配置
这里的配置指的是与部署环境有关的配置例如：
- 数据库、消息代理、缓存系统等与后端服务的连接配置和位置信息
- 每份部署独有的配置，例如：域名、连接数、与部署目标环境资源规模有关的JVM参数等。

如果使用配置文件实现配置与代码的分离，但是这种部署方式存在一些缺点：

1. 配置文件容易被开发人员不小心提交到代码库中，造成密码、证书等敏感信息泄露。提交到代码库中的配置文件还容易被和应用一起部署到目标环境中，很可能会导致在目标环境中应用了错误的配置或者造成配置冲突。
2. 配置文件会分散在不同的目录中，并且有不同的格式（配置文件的格式往往与开发语言和框架相关），这会给配置的统一管理造成困难。

为了避免上述的问题，本原则要求在环境中存储配置，一种典型的方式是把配置存储在环境变量中，这会是配置和代码彻底的分离。还可以使用`spring cloud confing`、 `nacos`、`apollo`等配置管理服务管理

## 四、支撑服务
指的是应用运行所依赖的各种服务，例如数据库、消息代理、缓存系统等，对于云原生应用来说，往往还会有日志收集服务、对象存储服务、以及各种通过API访问的服务

1. 不要将这些服务放在应用本地：云原生应用要求应用本身无状态化，那么状态信息就应该存储在外部服务中（参见不可变服务器）。同时，微服务模式要求应用责权单一以实现可靠性和扩展性，如果在应用本地放置数据库，那么微服务平台将无法通过更换应用的故障实例实现应用的高可用性，也无法通过自动化的横向伸缩实现扩展性，因为应用实例内包含两种性质完全不同的软件（应用和数据库），无法对两者使用同一种方式进行横向扩展。另外，如果将这些服务放在应用本地，那么也无法通过充分利用云平台提供的能力简化运维工作，例如，如果在应用本地放置数据库，而不是使用云平台提供的数据库服务，那么显然无法利用数据库服务提供的自动备份、安全、和高可用等特性。
2. 通过URL或者服务注册/认证中心访问这些后端服务：应用应该能够在不进行任何代码修改的情况下，在不同的目标环境中进行部署，应用不应该和后端服务的任何一种具体实现存在紧耦合关系。
## 五、构建、发布、运行
- 构建指的是将应用代码转化为执行体的过程：构建时会拉取特定版本的代码和依赖项，将其编译为二进制文件（针对编译型语言），并和资源文件一起打包。
- 发布指的是将构建的结果和部署所需的配置相结合，并将其放置于运行环境之中。
- 运行指的是将发布的结果启动为运行环境中的一个或多个进程。

本原则要求构建、发布和运行这三个步骤严格区分

1. 禁止直接修改运行状态的代码或者对应用进行打补丁，因为这些修改很难再同步回构建步骤，这时运行状态的代码就成为了“孤本”。同时，也不应该在运行期间修改应用的配置，配置的修改应该仅限于发布阶段
2. 运行这一步骤应该非常简单，仅限于启动进程，资源文件的关联应仅限于构建阶段，配置的结合应仅限于发布阶段。

同时，每一次发布都应该对应一个唯一的发布ID，发布的版本应当像一个只能追加的账本，一旦发布就不能修改

## 六、进程
以一个或多个无状态进程运行应用，本原则要求应用进程内不应该保存状态信息，任何状态信息都应该保存在数据库、缓存系统等外部服务中。应用实例之间的数据共享也要通过数据库和缓存系统等中间件进行

## 七、端口绑定：通过端口绑定应用服务



## 八、并发：通过进程模型进行扩展

与通过进程模型进行扩展相反的方式是通过线程模型进行扩展，这是一种相对较为传统的方式，典型的例子是Java应用。当我们启动一个Java进程的时候，通常会通过JVM参数为其设置各个内存区域的容量上下限，同时还可能会在应用层面为其设置一个或者多个线程池的容量上下限，当外部负载变化时，进程所占用的内存容量和进程内部的线程数量可以在这些预先设置好的上下限之间进行扩展，这种方式也被称为纵向扩展或者垂直扩展。

所以，现在更为推崇使用“固定的”进程（对前面Java应用的例子来说，就是固定的内存容量和线程池容量），在外部负载提高时，启动更多的进程，在外部负载降低时，停止一部分进程，这种方式就是本原则所说的通过进程模型进行扩展，有时候也被称为横向扩展或者水平扩展。

## 九、易处理：快速启动和优雅终止可最大化健壮性
该原则要求应用可以瞬间（理想情况下是数秒或者更短）启动和停止，因为这将有利于应用快速进行横向扩展和变更或者故障后的重新部署，而这两者都是程序健壮性的体现。优雅终止需要尽可能降低应用终止对用户造成的不良影响。

## 十、开发环境与线上环境等价
尽可能的保持开发、预发布、线上环境相同。本原则要求更为密集和频繁的向线上环境发布更新，要求建立机制以保障开发人员可以在数小时甚至数分钟内既可将更新发布到线上。要求开发人员不能只关心开发环境中自己的代码，更要密切关注代码的部署过程和代码在线上的运行情况

## 十一、日志：把日志当做事件流
应用程序应该将其产生的事件以每个事件一行的格式按时间顺序输出，这点毋庸置疑，但是本原则想说的其实是：**应用程序不要自行管理日志文件。** 应把事件统一的采集到日志平台进行储存、分析，提升运维的效率

## 十二、 后台管理任务当作一次性进程运行


## 十三、 API 优先
系统或者服务通过API 通信，不应该通过程序来依赖的方式通讯，应通过远程API 来解决服务之间的依赖

## 十四、遥测
输出监控指标与追踪日志用于统一监控

## 十五、认证与授权
系统或服务间零信任，可能服务部署在不同的云服务或者边缘计算上，服务的暴露也越来越多，可能无法判断那些服务是合法的请求，因此认为所有的请求都是不安全的

 
