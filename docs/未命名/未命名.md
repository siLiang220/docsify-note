
## Dreambooth 训练

Dreambooth  主要是用于文生图模型进行微调，只需要根据自己的风格收集图片，然后使用Dreambooth就可以训练一个专属的模型

![](https://zhaosi-1253759587.cos.ap-nanjing.myqcloud.com/files/obsidian/picture/20231228191329.png)

### Dreambooth 训练过程

> **期望预训练过程：**
> 
> 在预训练模型中，权重被锁定，不会在Dreambooth的训练过程中发生变化。根据提示词“A dog”，默认生成松狮狗这一类型的图片。

1. **获取预训练模型：**
    - 获取一个预训练模型，其中的权重是被锁定的，不会发生改变。
    - 针对提示词"A dog"，预训练模型会生成不同类型的狗图片。
2. **复制并修改权重：**
    - 复制锁定的预训练模型，生成一个新的模型，其中的权重是可以修改的。
    - 复制的模型与原始锁定的模型在同一提示词下生成的结果是相似的（通过损失函数进行对比）。
3. **专属提示词定义：**
    - 在训练自己风格的模型时，定义一个专属的提示词 [V]。
    - 专属提示词是不具有特定意义的词语，这个词语是自己专有风格的提示词。
4. **训练过程：**
    - 训练自己风格的模型，计算自己收集的训练图片与提示词生成的图片之间的损失。
    - 损失值越小越好，使训练模型能够生成符合自己专有风格的图片。
5. **预测与生成：**
    - 使用训练好的模型，输入关键词，生成相应风格的装饰图片。
### Dreambooth 代码结构
![](https://zhaosi-1253759587.cos.ap-nanjing.myqcloud.com/files/obsidian/picture/20231228200222.png)

### Dreambooth 训练准备

尽量使用不同的环境、灯光、发型、表情、姿势、角度等，以png的格式保存并将这些数据放入文件夹train_images中。

### Dreambooth 训练代码

### DreamBooth提示词配置

INSTANCE_PROMPT : 专属提示词
CLASS_PROMPT： 让AI自动生成image的提示词，不要包含专属提示词
SAVE_SAMPLE_PROMPT:  进行多次迭代生成result 图片的提示词

### DreamBooth加速器配置

```sh
!./accelerate.sh
```
该配置文件包含了一些与 Accelerated Inference 相关的默认配置，如计算环境、分布式训练设置、混合精度等。这样的配置文件通常用于定义加速推理的运行环境和选项：

### DreamBooth常用参数配置（这个需要重新看视频）
